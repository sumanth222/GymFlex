<div class="confirm-page" *ngIf="gym && booking">

  <button class="back-btn" (click)="goHome()">‚Üê Home</button>

  <!-- ===================== -->
  <!-- PAYMENT PENDING -->
  <!-- ===================== -->
  <ng-container *ngIf="paymentState === 'pending'">

    <section class="success-header pending">
      <h1 class="title">Complete your payment</h1>
      <p class="subtitle">
        Finish the UPI payment in your app and come back here.
      </p>
    </section>

    <section class="qr-card">
      <div class="qr-info">
        <div class="gym-name">{{ gym.name }}</div>
        <div class="gym-address">{{ gym.address }}</div>

        <div class="visit-details">
          <div class="label">Amount to Pay</div>
          <div class="value price">‚Çπ{{ booking.amount }}</div>
        </div>

        <div class="visit-details">
          <div class="label">Booking ID</div>
          <div class="value booking-id">{{ bookingId }}</div>
        </div>
      </div>
    </section>

    <button class="primary-btn full-width" (click)="markAsPaid()">
      I‚Äôve Paid
    </button>

    <p class="helper-text">
      Don‚Äôt close this page until payment is completed.
    </p>

  </ng-container>

  <!-- ===================== -->
  <!-- PAYMENT SUBMITTED -->
  <!-- ===================== -->
  <ng-container *ngIf="paymentState === 'submitted'">

    <section class="success-header waiting">
      <h1 class="title">Payment submitted</h1>

      <p class="subtitle">
        We‚Äôre verifying your payment. This usually takes a few minutes.
      </p>

      <div class="loader-row">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
      <p class="helper-text subtle">
        Checking payment status‚Ä¶
      </p>

      <p class="helper-text clickable" (click)="showHelp()">
        Payment not reflected?
      </p>
    </section>

    <section class="info-card">
      <ul>
        <li>Do not visit the gym until payment is confirmed.</li>
        <li>You‚Äôll see a QR code here once approved.</li>
        <li>We‚Äôll notify you on WhatsApp.</li>
      </ul>
    </section>

  </ng-container>

  <!-- ===================== -->
  <!-- PAYMENT CONFIRMED -->
  <!-- ===================== -->
  <ng-container *ngIf="paymentState === 'confirmed'">

    <section class="success-header">
      <h1 class="title">You‚Äôre all set üéâ</h1>
      <p class="subtitle">Show this QR code at the gym reception.</p>
    </section>

    <section class="qr-card">
      <div class="qr-wrapper">
        <img
          [src]="'https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=' + bookingId"
          alt="QR Code"
        />
      </div>

      <div class="qr-info">
        <div class="gym-name">{{ gym.name }}</div>
        <div class="gym-address">{{ gym.address }}</div>

        <div class="visit-details">
          <div class="label">Visit Date</div>
          <div class="value">{{ booking.date }}</div>
        </div>
      </div>
    </section>

  </ng-container>

  <!-- ===================== -->
<!-- PAYMENT HELP -->
<!-- ===================== -->
<ng-container *ngIf="paymentState === 'help'">

  <section class="success-header waiting">
    <h1 class="title" style="cursor: pointer; font-weight: 600;">Issues with your Payment?</h1>
    <p class="subtitle">
      Sometimes UPI confirmations can take a little longer.
    </p>
  </section>

  <section class="info-card">
    <ul>
      <li>If your amount was debited, don‚Äôt worry.</li>
      <li>We‚Äôll verify it manually.</li>
      <li>Have your UPI reference number ready if possible.</li>
    </ul>
  </section>

  <a
    class="primary-btn full-width whatsapp-btn"
    href="https://wa.me/919963192460?text=Hi%20GymFlex%20team,%20my%20payment%20is%20not%20reflected.%20Booking%20ID:%20{{ bookingId }}"
    target="_blank"
  >
    Contact us on WhatsApp
  </a>

  <p class="helper-text">
    Our team usually responds within a few minutes.
  </p>

</ng-container>


</div>